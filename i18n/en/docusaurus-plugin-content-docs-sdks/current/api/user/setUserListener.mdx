---
sidebar_position: 1
toc_min_heading_level: 2
toc_max_heading_level: 2
---

# setUserListener

## Feature Introduction

:::info Description

Set user event listener. It provides asynchronous callback notifications for changes in the login user's profile and changes in the online status of subscribed users. This ensures the UI is updated promptly.

:::

:::caution Note

(1) Call immediately after initSDK;
(2) Can only be called once.

:::

<Tabs
groupId="sdks-language"
values={[
{ label: 'iOS', value: 'iOS', },
{ label: 'Android', value: 'Android', },
{ label: 'Flutter', value: 'Flutter', },
{ label: 'uni-app', value: 'uni-app', },
{ label: 'Browser/MiniProgram', value: 'Web', },
{ label: 'React-Native', value: 'React-Native', },
{ label: 'Uinty', value: 'Unity', },
]
}>

<TabItem value="Flutter">

### Function Prototype

```dart showLineNumbers
  Future setUserListener(OnUserListener listener)
```

### Return Result

| Parameter Name | Parameter Type                                          | Description                             |
| -------------- | ------------------------------------------------------- | --------------------------------------- |
| listener      | [OnUserListener](/listener/userListener.mdx) | Callback function for user info updates |

### Code Example

```dart showLineNumbers
    OpenIM.iMManager.userManager.setUserListener(OnUserListener(
      onSelfInfoUpdated: (UserInfo userInfo){},
      userStatusChanged: (UserStatusInfo statusInfo){}
    ));
```

</TabItem>

<TabItem value="iOS">

### Function Prototype

```swift

- (void)setUserListenerWithUserInfoUpdate:(nullable OIMUserInfoCallback)onUserInfoUpdate
                      onUserStatusChanged:(nullable OIMUserStatusInfoCallback)onUserStatusChanged;

```

### Return Result

| Parameter Name     | Parameter Type                                           | Description                             |
| ------------------ | -------------------------------------------------------- | --------------------------------------- |
| onUserInfoUpdate   | OIMUserInfo                                               | Callback function for user info updates |
| onUserStatusChanged| [OIMUserStatusInfo](/class/user/userStatusInfo.mdx) | Callback function for user status updates |

### Code Example

```swift showLineNumbers

[OIMManager.callbacker setSelfUserInfoUpdateListenerWithUserInfoUpdate:^(OIMUserInfo * _Nullable userInfo) {

} onUserStatusChanged:^(OIMUserStatusInfo * _Nullable statusInfo) {

}];

```

</TabItem>

<TabItem value="Android">

### Function Prototype

```java showLineNumbers

  public void setOnUserListener(OnUserListener listener)

```

### Input Parameter

| Parameter Name | Parameter Type                                          | Required                 | Description |
| -------------- | ------------------------------------------------------- | ------------------------ | ----------- |
| listener      | [OnUserListener](/listener/userListener.mdx) | Callback function for user info updates |

### Return Result

### Code Example

```java showLineNumbers

   OpenIMClient.getInstance().userInfoManager.setOnUserListener(new OnUserListener(){...})

```

</TabItem>

<TabItem value="Web">

:::caution Note

It's automatically set after a successful login. You can directly use the listener on the client side. [For details on user events, see here](/listener/userListener.mdx).

:::

</TabItem>

<TabItem value="uni-app">

:::caution Note

It's automatically set after successful initialization. Callbacks are transmitted to the client through `globalEvent`. [For details on user events, see here](/listener/userListener.mdx).

:::

</TabItem>
<TabItem value="React-Native">

:::caution Attention

After successful initialization, it's set automatically. You can directly use the listener on the client side. [Details on user events can be found here](/listener/userListener.mdx)

:::

</TabItem>

<TabItem value="Unity">

### 函数原型

```C# showLineNumbers
public static void SetUserListener(IUserListener listener)
```

### 输入参数

| 参数名称 | 参数类型                                              | 是否必填               | 描述 |
| -------- | ----------------------------------------------------- | ---------------------- | ---- |
| listener | [IUserListener](/listener/userListener.mdx) | 用户信息更新的回调函数 |

### 返回结果

### 代码示例

```C# showLineNumbers
IMSDK.SetUserListener(listener);

```

</TabItem>

</Tabs>